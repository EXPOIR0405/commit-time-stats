name: Update commit time stats

on:
  schedule:
    - cron: '0 0 * * *'  # ë§¤ì¼ ìì •ì— ì‹¤í–‰
  workflow_dispatch: # ìˆ˜ë™ ì‹¤í–‰ë„ ê°€ëŠ¥í•˜ê²Œ
  push:  # pushí•  ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ë„ë¡ ì¶”ê°€

jobs:
  update-stats:
    runs-on: ubuntu-latest
    permissions:  # ê¶Œí•œ ëª…ì‹œì  ì¶”ê°€
      contents: write
    steps:
      - uses: actions/checkout@v2
      
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.x'
          
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install PyGithub
          
      - name: Update stats
        env:
          GH_TOKEN: ${{ secrets.GH_TOKEN }}
        run: |
          python update_stats.py
          
      - name: Commit changes
        run: |
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          git add README.md
          git diff --quiet && git diff --staged --quiet || git commit -m "ğŸ“Š ì»¤ë°‹ í†µê³„ ìë™ ì—…ë°ì´íŠ¸"
          git push 